<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NutriScan Pro - Food Calorie Counter</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">

  <style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
    :root{
      --primary:#ff7e5f; --secondary:#feb47b;
      --accent:#4cd964; --light:#ffffff; --dark:#1c1c1c; --gray:#777;
      --warm-light:#fff5f2; --warm-dark:#33211d;
    }
    body{
      background:linear-gradient(135deg,var(--primary),var(--secondary));
      min-height:100vh;display:flex;flex-direction:column;
    }
    .container{max-width:1300px;margin:auto;padding:20px;flex:1;}
    
    /* Header */
    header{text-align:center;color:#fff;padding:40px 20px;}
    header h1{font-size:3.2rem;font-weight:700;
      background:linear-gradient(to right,#fff,#ffd1c4);
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;}
    header p{font-size:1.2rem;opacity:0.9;margin-top:10px;}
    
    /* App Layout */
    .app-container{
      display:grid;grid-template-columns:1fr 1fr;
      gap:30px;margin-top:30px;
    }
    
    /* Card */
    .card{
      background:rgba(255,255,255,0.9);
      backdrop-filter:blur(10px);
      border-radius:20px;
      padding:25px;
      box-shadow:0 12px 25px rgba(0,0,0,0.2);
      transition:.3s;
    }
    .card:hover{transform:translateY(-5px);}
    .section-title{font-size:1.5rem;font-weight:600;color:var(--primary);margin-bottom:20px;}
    
    /* Upload Area */
    .upload-area{
      border:3px dashed var(--primary);border-radius:15px;
      padding:35px;text-align:center;cursor:pointer;
      transition:.3s;position:relative;
    }
    .upload-area i{font-size:60px;color:var(--primary);}
    .upload-area:hover{background:var(--warm-light);border-color:var(--secondary);}
    
    /* Buttons */
    .btn{display:inline-block;padding:12px 25px;margin:10px 5px;
      border:none;border-radius:50px;color:#fff;background:var(--primary);
      font-weight:500;cursor:pointer;transition:.3s;}
    .btn:hover{background:var(--secondary);transform:translateY(-2px);}
    .btn-secondary{background:var(--accent);}
    .btn-secondary:hover{background:#3cb054;}
    .btn:disabled{background:#ccc;cursor:not-allowed;}
    .btn:disabled:hover{transform:none;}
    
    /* Nutrition */
    .results-content{text-align:center;}
    .food-image{width:90%;max-width:280px;border-radius:15px;margin:0 auto 15px;
      box-shadow:0 8px 20px rgba(0,0,0,0.15);}
    .food-name{font-size:1.8rem;margin:10px 0;color:var(--dark);}
    .calorie-display{font-size:3rem;font-weight:700;color:var(--primary);}
    .progress-bar{height:8px;background:#eee;border-radius:5px;margin:10px 0;}
    .progress{height:100%;border-radius:5px;background:var(--accent);width:0%;transition:1s;}
    
    .nutrition-facts{margin-top:20px;text-align:left;}
    .nutrition-facts h3{text-align:center;margin-bottom:15px;color:var(--secondary);}
    .nutri-row{display:flex;justify-content:space-between;padding:6px 0;
      border-bottom:1px solid #eee;font-size:.95rem;}
    
    /* Enhanced Nutrition Info */
    .nutrition-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      margin-top: 20px;
    }
    .nutrition-card {
      background: var(--warm-light);
      border-radius: 12px;
      padding: 15px;
      text-align: center;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .nutrition-card h4 {
      color: var(--primary);
      margin-bottom: 8px;
      font-size: 1rem;
    }
    .nutrition-card .value {
      font-size: 1.4rem;
      font-weight: 600;
      color: var(--warm-dark);
    }
    .nutrition-card .unit {
      font-size: 0.8rem;
      color: var(--gray);
    }
    .nutrition-card .daily-value {
      font-size: 0.85rem;
      color: var(--secondary);
      margin-top: 5px;
    }
    
    /* Food Database */
    .food-database{grid-column:span 2;
      background:rgba(255,255,255,0.9);backdrop-filter:blur(10px);
      border-radius:20px;padding:25px;margin-top:20px;}
    .food-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:20px;}
    .food-item{background:#f9f9f9;border-radius:15px;padding:15px;text-align:center;transition:.3s;cursor:pointer;}
    .food-item:hover{transform:translateY(-5px);box-shadow:0 8px 18px rgba(0,0,0,0.15);}
    .food-item img{width:100%;height:120px;object-fit:cover;border-radius:10px;margin-bottom:8px;}
    .food-item h4{color:var(--primary);}
    .food-item p{color:var(--gray);}
    
    /* History */
    .history-section{background:rgba(255,255,255,0.9);backdrop-filter:blur(10px);
      border-radius:20px;padding:25px;margin-top:30px;}
    .history-items{display:flex;gap:20px;flex-wrap:wrap;}
    .history-item{flex:1;min-width:200px;background:#fafafa;border-radius:15px;padding:15px;text-align:center;}
    .history-item img{width:100%;height:120px;object-fit:cover;border-radius:10px;margin-bottom:10px;}
    
    /* Camera Modal */
    .camera-modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;
      background:rgba(0,0,0,0.8);z-index:1000;justify-content:center;align-items:center;}
    .camera-container{background:#fff;border-radius:20px;padding:25px;width:90%;max-width:600px;}
    .camera-preview{width:100%;background:#eee;border-radius:10px;overflow:hidden;margin:15px 0;}
    #video-element{width:100%;display:block;}
    .camera-controls{display:flex;justify-content:center;gap:15px;}
    
    /* Loading Animation */
    .loading{display:none;text-align:center;margin:20px 0;}
    .loading-spinner{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid var(--primary);
      border-radius:50%;animation:spin 1s linear infinite;margin:0 auto;}
    @keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
    
    /* Footer */
    footer{background:var(--warm-dark);color:#ccc;padding:40px 20px;margin-top:40px;}
    .footer-content{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:30px;}
    .footer-column h3{color:#fff;margin-bottom:15px;font-size:1.2rem;}
    .footer-column a{color:#aaa;text-decoration:none;display:block;margin-bottom:8px;}
    .footer-column a:hover{color:#fff;}
    .social-icons{display:flex;gap:12px;margin-top:10px;}
    .social-icons a{width:38px;height:38px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#555;color:#fff;}
    .social-icons a:hover{background:var(--primary);}
    .footer-bottom{text-align:center;font-size:.9rem;margin-top:25px;}
    .footer-links{display:flex;justify-content:center;flex-wrap:wrap;gap:15px;margin-top:15px;}
    .footer-links a{color:#aaa;text-decoration:none;font-size:0.85rem;}
    .footer-links a:hover{color:#fff;text-decoration:underline;}
    
    @media(max-width:900px){
      .app-container{grid-template-columns:1fr;}
      .food-database{grid-column:1;}
      .nutrition-grid{grid-template-columns:1fr;}
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>NutriScan Pro</h1>
      <p>Take a photo of your food and instantly get detailed calorie information</p>
    </header>

    <div class="app-container">
      <!-- Upload -->
      <div class="card">
        <h2 class="section-title">Upload Food Photo</h2>
        <div class="upload-area" id="upload-area">
          <i class="fas fa-camera"></i>
          <h3>Click or drag & drop to upload</h3>
          <p>Supported formats: JPG, PNG, WEBP</p>
          <input type="file" id="file-input" accept="image/*" style="display:none;">
        </div>
        <div class="loading" id="upload-loading">
          <div class="loading-spinner"></div>
          <p>Analyzing your food...</p>
        </div>
        <div style="text-align:center;">
          <button class="btn" id="camera-btn"><i class="fas fa-camera"></i> Use Camera</button>
          <button class="btn btn-secondary" id="analyze-btn" disabled><i class="fas fa-search"></i> Analyze Food</button>
        </div>
      </div>

      <!-- Nutrition -->
      <div class="card">
        <h2 class="section-title">Nutrition Information</h2>
        <div class="results-content">
          <img src="https://via.placeholder.com/300x200/ff7e5f/ffffff?text=Upload+Food+Photo" class="food-image" id="food-image">
          <h3 class="food-name" id="food-name">Food Name</h3>
          <div class="calorie-display" id="calorie-display">0</div>
          <div class="progress-bar"><div class="progress" id="calorie-progress"></div></div>
          <p>Daily Value: <span id="daily-value">0%</span></p>
          
          <!-- Enhanced Nutrition Information -->
          <div class="nutrition-grid">
            <div class="nutrition-card">
              <h4>Protein</h4>
              <div class="value" id="protein-value">0</div>
              <div class="unit">grams</div>
              <div class="daily-value">10% of daily need</div>
            </div>
            <div class="nutrition-card">
              <h4>Carbs</h4>
              <div class="value" id="carbs-value">0</div>
              <div class="unit">grams</div>
              <div class="daily-value">8% of daily need</div>
            </div>
            <div class="nutrition-card">
              <h4>Fat</h4>
              <div class="value" id="fat-value">0</div>
              <div class="unit">grams</div>
              <div class="daily-value">5% of daily need</div>
            </div>
            <div class="nutrition-card">
              <h4>Fiber</h4>
              <div class="value" id="fiber-value">0</div>
              <div class="unit">grams</div>
              <div class="daily-value">12% of daily need</div>
            </div>
          </div>
          
          <div class="nutrition-facts">
            <h3>Detailed Nutrition Facts</h3>
            <div class="nutri-row"><span>Sugar</span><span id="sugar-value">0g</span></div>
            <div class="nutri-row"><span>Sodium</span><span id="sodium-value">0mg</span></div>
            <div class="nutri-row"><span>Potassium</span><span id="potassium-value">0mg</span></div>
            <div class="nutri-row"><span>Cholesterol</span><span id="cholesterol-value">0mg</span></div>
            <div class="nutri-row"><span>Vitamin A</span><span id="vitamin-a-value">0%</span></div>
            <div class="nutri-row"><span>Vitamin C</span><span id="vitamin-c-value">0%</span></div>
            <div class="nutri-row"><span>Calcium</span><span id="calcium-value">0%</span></div>
            <div class="nutri-row"><span>Iron</span><span id="iron-value">0%</span></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Food Database -->
    <div class="food-database">
      <h2 class="section-title">Food Database</h2>
      <div class="food-grid" id="food-database-grid">
        <!-- Food items will be populated by JavaScript -->
      </div>
    </div>

    <!-- History -->
    <div class="history-section">
      <h2 class="section-title">Recently Scanned Foods</h2>
      <div class="history-items" id="history-items">
        <!-- History items will be populated by JavaScript -->
      </div>
    </div>
  </div>

  <!-- Camera Modal -->
  <div class="camera-modal" id="camera-modal">
    <div class="camera-container">
      <h2 class="section-title">Take a Food Photo</h2>
      <div class="camera-preview">
        <video id="video-element" autoplay playsinline></video>
      </div>
      <div class="camera-controls">
        <button class="btn" id="capture-btn"><i class="fas fa-camera"></i> Capture</button>
        <button class="btn btn-secondary" id="close-camera"><i class="fas fa-times"></i> Close</button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <div class="footer-content">
      <div class="footer-column">
        <h3>NutriScan Pro</h3>
        <p>AI-powered food recognition to help you track your diet effortlessly.</p>
        <div class="social-icons">
          <a href="#"><i class="fab fa-facebook-f"></i></a>
          <a href="#"><i class="fab fa-twitter"></i></a>
          <a href="#"><i class="fab fa-instagram"></i></a>
          <a href="#"><i class="fab fa-linkedin-in"></i></a>
        </div>
      </div>
      <div class="footer-column">
        <h3>Quick Links</h3>
        <a href="#">Home</a>
        <a href="#">Database</a>
        <a href="#">Pricing</a>
        <a href="#">Blog</a>
        <a href="#">About Us</a>
      </div>
      <div class="footer-column">
        <h3>Support</h3>
        <a href="#">FAQ</a>
        <a href="#">Contact Us</a>
        <a href="#">Help Center</a>
        <a href="#">Documentation</a>
      </div>
      <div class="footer-column">
        <h3>Legal</h3>
        <a href="#">Terms & Conditions</a>
        <a href="#">Privacy Policy</a>
        <a href="#">Cookie Policy</a>
        <a href="#">Data Processing</a>
      </div>
    </div>
    
    <div class="footer-links">
      <a href="#">About Us</a>
      <a href="#">Blog</a>
      <a href="#">Terms & Conditions</a>
      <a href="#">Contact Us</a>
      <a href="#">Cookie Policy</a>
      <a href="#">Privacy Policy</a>
    </div>
    
    <div class="footer-bottom">&copy; 2025 NutriScan Pro. All rights reserved.</div>
  </footer>

  <script>
    // DOM Elements
    const uploadArea = document.getElementById('upload-area');
    const fileInput = document.getElementById('file-input');
    const cameraBtn = document.getElementById('camera-btn');
    const analyzeBtn = document.getElementById('analyze-btn');
    const cameraModal = document.getElementById('camera-modal');
    const videoElement = document.getElementById('video-element');
    const captureBtn = document.getElementById('capture-btn');
    const closeCamera = document.getElementById('close-camera');
    const uploadLoading = document.getElementById('upload-loading');
    
    // Nutrition display elements
    const foodImage = document.getElementById('food-image');
    const foodName = document.getElementById('food-name');
    const calorieDisplay = document.getElementById('calorie-display');
    const calorieProgress = document.getElementById('calorie-progress');
    const dailyValue = document.getElementById('daily-value');
    const proteinValue = document.getElementById('protein-value');
    const carbsValue = document.getElementById('carbs-value');
    const fatValue = document.getElementById('fat-value');
    const fiberValue = document.getElementById('fiber-value');
    const sugarValue = document.getElementById('sugar-value');
    const sodiumValue = document.getElementById('sodium-value');
    const potassiumValue = document.getElementById('potassium-value');
    const cholesterolValue = document.getElementById('cholesterol-value');
    const vitaminAValue = document.getElementById('vitamin-a-value');
    const vitaminCValue = document.getElementById('vitamin-c-value');
    const calciumValue = document.getElementById('calcium-value');
    const ironValue = document.getElementById('iron-value');
    
    // Food database and history containers
    const foodDatabaseGrid = document.getElementById('food-database-grid');
    const historyItems = document.getElementById('history-items');
    
    // Food database (sample data)
    const foodDatabase = [
      { 
        id: 1, 
        name: "Apple", 
        calories: 95, 
        protein: 0.5, 
        carbs: 25, 
        fat: 0.3, 
        fiber: 4.4, 
        sugar: 19, 
        sodium: 2,
        potassium: 195,
        cholesterol: 0,
        vitaminA: 1,
        vitaminC: 14,
        calcium: 1,
        iron: 1,
        image: "https://images.unsplash.com/photo-1568702846914-96b305d2aaeb?w=400" 
      },
      { 
        id: 2, 
        name: "Banana", 
        calories: 105, 
        protein: 1.3, 
        carbs: 27, 
        fat: 0.4, 
        fiber: 3.1, 
        sugar: 14, 
        sodium: 1,
        potassium: 422,
        cholesterol: 0,
        vitaminA: 1,
        vitaminC: 17,
        calcium: 0,
        iron: 1,
        image: "https://images.unsplash.com/photo-1571771894821-ce9b6c11b08e?w=400" 
      },
      { 
        id: 3, 
        name: "Pizza Slice", 
        calories: 285, 
        protein: 12, 
        carbs: 36, 
        fat: 10, 
        fiber: 2.5, 
        sugar: 3.8, 
        sodium: 640,
        potassium: 180,
        cholesterol: 18,
        vitaminA: 6,
        vitaminC: 2,
        calcium: 20,
        iron: 8,
        image: "https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=400" 
      },
      { 
        id: 4, 
        name: "Chicken Salad", 
        calories: 220, 
        protein: 25, 
        carbs: 8, 
        fat: 10, 
        fiber: 3, 
        sugar: 4, 
        sodium: 350,
        potassium: 420,
        cholesterol: 65,
        vitaminA: 45,
        vitaminC: 25,
        calcium: 8,
        iron: 10,
        image: "https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=400" 
      },
      { 
        id: 5, 
        name: "Chocolate Cake", 
        calories: 335, 
        protein: 5, 
        carbs: 45, 
        fat: 15, 
        fiber: 2, 
        sugar: 30, 
        sodium: 280,
        potassium: 160,
        cholesterol: 40,
        vitaminA: 4,
        vitaminC: 0,
        calcium: 6,
        iron: 10,
        image: "https://images.unsplash.com/photo-1578985545062-69928b1d9587?w=400" 
      },
      { 
        id: 6, 
        name: "Burger", 
        calories: 354, 
        protein: 17, 
        carbs: 29, 
        fat: 18, 
        fiber: 2, 
        sugar: 6, 
        sodium: 520,
        potassium: 380,
        cholesterol: 55,
        vitaminA: 4,
        vitaminC: 2,
        calcium: 15,
        iron: 20,
        image: "https://images.unsplash.com/photo-1553979459-d2229ba7433b?w=400" 
      }
    ];
    
    // History (initially empty)
    let scanHistory = [];
    
    // Current selected image
    let currentImage = null;
    
    // Initialize the application
    function init() {
      // Populate food database
      populateFoodDatabase();
      
      // Load history from localStorage if available
      const savedHistory = localStorage.getItem('scanHistory');
      if (savedHistory) {
        scanHistory = JSON.parse(savedHistory);
        populateHistory();
      }
      
      // Set up event listeners
      setupEventListeners();
    }
    
    // Set up event listeners
    function setupEventListeners() {
      // Upload area click
      uploadArea.addEventListener('click', () => {
        fileInput.click();
      });
      
      // File input change
      fileInput.addEventListener('change', (e) => {
        if (e.target.files && e.target.files[0]) {
          handleImageUpload(e.target.files[0]);
        }
      });
      
      // Drag and drop
      uploadArea.addEventListener('dragover', (e) => {
        e.preventDefault();
        uploadArea.style.background = '#f4f8ff';
        uploadArea.style.borderColor = 'var(--secondary)';
      });
      
      uploadArea.addEventListener('dragleave', () => {
        uploadArea.style.background = '';
        uploadArea.style.borderColor = 'var(--primary)';
      });
      
      uploadArea.addEventListener('drop', (e) => {
        e.preventDefault();
        uploadArea.style.background = '';
        uploadArea.style.borderColor = 'var(--primary)';
        
        if (e.dataTransfer.files && e.dataTransfer.files[0]) {
          handleImageUpload(e.dataTransfer.files[0]);
        }
      });
      
      // Camera button
      cameraBtn.addEventListener('click', openCamera);
      
      // Analyze button
      analyzeBtn.addEventListener('click', analyzeFood);
      
      // Camera controls
      captureBtn.addEventListener('click', captureImage);
      closeCamera.addEventListener('click', closeCameraModal);
    }
    
    // Handle image upload
    function handleImageUpload(file) {
      if (!file.type.match('image.*')) {
        alert('Please upload an image file');
        return;
      }
      
      const reader = new FileReader();
      reader.onload = (e) => {
        currentImage = e.target.result;
        foodImage.src = currentImage;
        analyzeBtn.disabled = false;
      };
      reader.readAsDataURL(file);
    }
    
    // Open camera
    function openCamera() {
      cameraModal.style.display = 'flex';
      
      // Access camera
      navigator.mediaDevices.getUserMedia({ video: true })
        .then(stream => {
          videoElement.srcObject = stream;
        })
        .catch(error => {
          console.error('Error accessing camera:', error);
          alert('Unable to access camera. Please check permissions.');
          closeCameraModal();
        });
    }
    
    // Close camera modal
    function closeCameraModal() {
      cameraModal.style.display = 'none';
      
      // Stop camera stream
      if (videoElement.srcObject) {
        const tracks = videoElement.srcObject.getTracks();
        tracks.forEach(track => track.stop());
        videoElement.srcObject = null;
      }
    }
    
    // Capture image from camera
    function captureImage() {
      const canvas = document.createElement('canvas');
      canvas.width = videoElement.videoWidth;
      canvas.height = videoElement.videoHeight;
      canvas.getContext('2d').drawImage(videoElement, 0, 0);
      
      currentImage = canvas.toDataURL('image/png');
      foodImage.src = currentImage;
      analyzeBtn.disabled = false;
      
      closeCameraModal();
    }
    
    // Analyze food (simulated)
    function analyzeFood() {
      if (!currentImage) return;
      
      // Show loading
      uploadLoading.style.display = 'block';
      analyzeBtn.disabled = true;
      
      // Simulate API call with timeout
      setTimeout(() => {
        // Randomly select a food item from database
        const randomFood = foodDatabase[Math.floor(Math.random() * foodDatabase.length)];
        
        // Update UI with food data
        displayFoodData(randomFood);
        
        // Add to history
        addToHistory(randomFood);
        
        // Hide loading
        uploadLoading.style.display = 'none';
        analyzeBtn.disabled = false;
      }, 2000);
    }
    
    // Display food data
    function displayFoodData(food) {
      foodName.textContent = food.name;
      calorieDisplay.textContent = food.calories;
      
      // Calculate daily value percentage (based on 2000 calorie diet)
      const dailyPercent = Math.min(Math.round((food.calories / 2000) * 100), 100);
      dailyValue.textContent = `${dailyPercent}%`;
      calorieProgress.style.width = `${dailyPercent}%`;
      
      // Update nutrition facts
      proteinValue.textContent = food.protein;
      carbsValue.textContent = food.carbs;
      fatValue.textContent = food.fat;
      fiberValue.textContent = food.fiber;
      sugarValue.textContent = `${food.sugar}g`;
      sodiumValue.textContent = `${food.sodium}mg`;
      potassiumValue.textContent = `${food.potassium}mg`;
      cholesterolValue.textContent = `${food.cholesterol}mg`;
      vitaminAValue.textContent = `${food.vitaminA}%`;
      vitaminCValue.textContent = `${food.vitaminC}%`;
      calciumValue.textContent = `${food.calcium}%`;
      ironValue.textContent = `${food.iron}%`;
    }
    
    // Add to history
    function addToHistory(food) {
      // Add to beginning of history array
      scanHistory.unshift({
        ...food,
        timestamp: new Date().toISOString(),
        image: currentImage
      });
      
      // Keep only last 6 items
      if (scanHistory.length > 6) {
        scanHistory.pop();
      }
      
      // Save to localStorage
      localStorage.setItem('scanHistory', JSON.stringify(scanHistory));
      
      // Update UI
      populateHistory();
    }
    
    // Populate food database
    function populateFoodDatabase() {
      foodDatabaseGrid.innerHTML = '';
      
      foodDatabase.forEach(food => {
        const foodItem = document.createElement('div');
        foodItem.className = 'food-item';
        foodItem.innerHTML = `
          <img src="${food.image}" alt="${food.name}">
          <h4>${food.name}</h4>
          <p>${food.calories} calories</p>
        `;
        
        foodItem.addEventListener('click', () => {
          displayFoodData(food);
          foodImage.src = food.image;
          currentImage = food.image;
        });
        
        foodDatabaseGrid.appendChild(foodItem);
      });
    }
    
    // Populate history
    function populateHistory() {
      historyItems.innerHTML = '';
      
      if (scanHistory.length === 0) {
        historyItems.innerHTML = '<p>No recent scans. Analyze some food to see them here!</p>';
        return;
      }
      
      scanHistory.forEach(item => {
        const historyItem = document.createElement('div');
        historyItem.className = 'history-item';
        
        const date = new Date(item.timestamp);
        const formattedDate = `${date.toLocaleDateString()} ${date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}`;
        
        historyItem.innerHTML = `
          <img src="${item.image}" alt="${item.name}">
          <h4>${item.name}</h4>
          <p>${item.calories} calories</p>
          <small>${formattedDate}</small>
        `;
        
        historyItem.addEventListener('click', () => {
          displayFoodData(item);
          foodImage.src = item.image;
          currentImage = item.image;
        });
        
        historyItems.appendChild(historyItem);
      });
    }
    
    // Initialize the app when DOM is loaded
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
